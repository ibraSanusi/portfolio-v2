---
import H2Typography from "../ui/H2Typography.astro";
import PlusIcon from "../ui/icons/PlusIcon.astro";
import Separator from "../ui/Separator.astro";

const faqs = [
  {
    question: "¿Qué servicios de desarrollo web ofreces exactamente?",
    answer:
      "Creo páginas web, landings, tiendas online, interfaces en React.js, desarrollo con Next.js, optimización SEO técnico, mantenimiento mensual y mejoras específicas para pymes y negocios locales.",
  },
  {
    question: "¿Trabajas con negocios de cualquier sector?",
    answer:
      "Sí. He trabajado con pymes, ecommerce, startups y profesionales independientes. Me adapto a cada sector y siempre diseño una solución a medida.",
  },
  {
    question:
      "¿Diseñas solamente páginas web o también tiendas online y aplicaciones?",
    answer:
      "Diseño y desarrollo páginas web, landings de alto rendimiento, ecommerce completos y aplicaciones web interactivas con React.js o Next.js.",
  },
  {
    question: "¿Cómo es tu proceso de trabajo?",
    answer:
      "1) Reunión inicial para entender tu proyecto. 2) Propuesta y planificación. 3) Diseño y maquetación. 4) Desarrollo. 5) Optimización SEO y rendimiento. 6) Entrega + soporte opcional.",
  },
  {
    question: "¿Cuánto tardas en entregar un proyecto?",
    answer:
      "Una landing suele estar lista en 5–10 días. Una web corporativa entre 1–3 semanas. Proyectos más complejos o ecommerce entre 3–6 semanas.",
  },
  {
    question: "¿Ofreces SEO además del diseño web?",
    answer:
      "Sí. Todas mis páginas están optimizadas para velocidad, indexación, estructura SEO, etiquetas, datos estructurados y buenas prácticas con Google. También puedo ayudarte con SEO local si estás en Madrid.",
  },
  {
    question: "¿Puedes trabajar si ya tengo una web y solo necesito mejoras?",
    answer:
      "Sí. Ofrezco servicios de mantenimiento, optimización, desarrollo de nuevos módulos, integración de APIs o migración a React o Next.js.",
  },
  {
    question: "¿Trabajas con clientes fuera de España?",
    answer:
      "Sí. Aunque estoy en Madrid, trabajo con clientes de España, Latinoamérica y cualquier país gracias a reuniones online.",
  },
  {
    question: "¿Qué tecnologías utilizas?",
    answer:
      "HTML5, CSS, Tailwind, JavaScript, TypeScript, React.js, Next.js, Node.js, Express, Supabase, PostgreSQL y herramientas de optimización y SEO técnico.",
  },
  {
    question: "¿Ofreces mantenimiento después del proyecto?",
    answer:
      "Sí. Ofrezco planes mensuales para actualizaciones, mejoras, rendimiento, seguridad y nuevas funcionalidades.",
  },
  {
    question: "¿Cómo calculas el precio de un proyecto?",
    answer:
      "Depende del alcance: complejidad, número de secciones, funcionalidades y diseño. Siempre envío un presupuesto cerrado y transparente.",
  },
  {
    question: "¿Cuáles son tus horarios?",
    answer:
      "Trabajo como desarrollador en una empresa, así que atiendo proyectos freelance a partir de las 18:00 y fines de semana, siempre con organización previa.",
  },
];
---

<div class="space-y-6">
  <div class="flex flex-row items-center gap-4">
    <H2Typography>Preguntas frecuentes</H2Typography>
    <Separator />
  </div>

  <section id="faq" class="space-y-6 scroll-mt-24">
    <ul class="flex flex-col gap-3 overflow-hidden">
      {
        faqs.map((faq, idx) => (
          <li class="bg-[#1C1C1C] rounded-xl p-4 transform transition-all duration-300">
            <button
              id={`faq-${idx}`}
              class="flex justify-between items-center w-full"
            >
              {faq.question}
              <i class="p-2 bg-black rounded-full transition-transform duration-300">
                <PlusIcon />
              </i>
            </button>
            <div
              id={`faq-answer-${idx}`}
              class="max-h-0 overflow-hidden transition-[max-height] duration-300"
            >
              <p class="text-white/70">{faq.answer}</p>
            </div>
          </li>
        ))
      }
    </ul>
  </section>
</div>

<script>
  const faqItems = document.querySelectorAll<HTMLButtonElement>("ul li button");

  faqItems.forEach((faqItem, idx) => {
    const answer = document.getElementById(
      `faq-answer-${idx}`
    ) as HTMLDivElement;
    const icon = faqItem.querySelector("i") as HTMLElement;

    faqItem.addEventListener("click", () => {
      if (!answer) return;

      // Abrir/cerrar acordeón
      if (answer.style.maxHeight && answer.style.maxHeight !== "0px") {
        answer.style.maxHeight = "0";
        icon.style.transform = "rotate(0deg)";
      } else {
        answer.style.maxHeight = answer.scrollHeight + "px";
        icon.style.transform = "rotate(45deg)";
      }
    });
  });
</script>

<style>
  .block {
    display: block;
  }

  .rotate-45 {
    transform: rotate(45deg);
    transition: transform 0.3s;
  }
</style>

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "¿Qué servicios de desarrollo web ofreces exactamente?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Creo páginas web, landings, tiendas online, interfaces en React.js, desarrollo con Next.js, optimización SEO técnico, mantenimiento mensual y mejoras específicas para pymes y negocios locales."
        }
      },
      {
        "@type": "Question",
        "name": "¿Trabajas con negocios de cualquier sector?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Sí. He trabajado con pymes, ecommerce, startups y profesionales independientes. Me adapto a cada sector y siempre diseño una solución a medida."
        }
      },
      {
        "@type": "Question",
        "name": "¿Diseñas solamente páginas web o también tiendas online y aplicaciones?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Diseño y desarrollo páginas web, landings de alto rendimiento, ecommerce completos y aplicaciones web interactivas con React.js o Next.js."
        }
      },
      {
        "@type": "Question",
        "name": "¿Cómo es tu proceso de trabajo?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "1) Reunión inicial para entender tu proyecto. 2) Propuesta y planificación. 3) Diseño y maquetación. 4) Desarrollo. 5) Optimización SEO y rendimiento. 6) Entrega + soporte opcional."
        }
      },
      {
        "@type": "Question",
        "name": "¿Cuánto tardas en entregar un proyecto?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Una landing suele estar lista en 5–10 días. Una web corporativa entre 1–3 semanas. Proyectos más complejos o ecommerce entre 3–6 semanas."
        }
      },
      {
        "@type": "Question",
        "name": "¿Ofreces SEO además del diseño web?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Sí. Todas mis páginas están optimizadas para velocidad, indexación, estructura SEO, etiquetas, datos estructurados y buenas prácticas con Google. También puedo ayudarte con SEO local si estás en Madrid."
        }
      },
      {
        "@type": "Question",
        "name": "¿Puedes trabajar si ya tengo una web y solo necesito mejoras?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Sí. Ofrezco servicios de mantenimiento, optimización, desarrollo de nuevos módulos, integración de APIs o migración a React o Next.js."
        }
      },
      {
        "@type": "Question",
        "name": "¿Trabajas con clientes fuera de España?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Sí. Aunque estoy en Madrid, trabajo con clientes de España, Latinoamérica y cualquier país gracias a reuniones online."
        }
      },
      {
        "@type": "Question",
        "name": "¿Qué tecnologías utilizas?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "HTML5, CSS, Tailwind, JavaScript, TypeScript, React.js, Next.js, Node.js, Express, Supabase, PostgreSQL y herramientas de optimización y SEO técnico."
        }
      },
      {
        "@type": "Question",
        "name": "¿Ofreces mantenimiento después del proyecto?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Sí. Ofrezco planes mensuales para actualizaciones, mejoras, rendimiento, seguridad y nuevas funcionalidades."
        }
      },
      {
        "@type": "Question",
        "name": "¿Cómo calculas el precio de un proyecto?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Depende del alcance: complejidad, número de secciones, funcionalidades y diseño. Siempre envío un presupuesto cerrado y transparente."
        }
      },
      {
        "@type": "Question",
        "name": "¿Cuáles son tus horarios?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Trabajo como desarrollador en una empresa, así que atiendo proyectos freelance a partir de las 18:00 y fines de semana, siempre con organización previa."
        }
      }
    ]
  }
</script>
